(self.webpackChunkiconic_taste_backend=self.webpackChunkiconic_taste_backend||[]).push([[8853],{68717:function(R,A,n){(function(s,P){R.exports=P(n(67294))})(this,function(s){return function(P){var i={};function l(o){if(i[o])return i[o].exports;var c=i[o]={i:o,l:!1,exports:{}};return P[o].call(c.exports,c,c.exports,l),c.l=!0,c.exports}return l.m=P,l.c=i,l.d=function(o,c,m){l.o(o,c)||Object.defineProperty(o,c,{enumerable:!0,get:m})},l.r=function(o){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},l.t=function(o,c){if(1&c&&(o=l(o)),8&c||4&c&&typeof o=="object"&&o&&o.__esModule)return o;var m=Object.create(null);if(l.r(m),Object.defineProperty(m,"default",{enumerable:!0,value:o}),2&c&&typeof o!="string")for(var y in o)l.d(m,y,function(h){return o[h]}.bind(null,y));return m},l.n=function(o){var c=o&&o.__esModule?function(){return o.default}:function(){return o};return l.d(c,"a",c),c},l.o=function(o,c){return Object.prototype.hasOwnProperty.call(o,c)},l.p="",l(l.s=5)}({0:function(P,i){P.exports=s},5:function(P,i,l){"use strict";l.r(i);var o=l(0);function c(){return(c=Object.assign||function(m){for(var y=1;y<arguments.length;y++){var h=arguments[y];for(var b in h)Object.prototype.hasOwnProperty.call(h,b)&&(m[b]=h[b])}return m}).apply(this,arguments)}i.default=function(m){return o.createElement("svg",c({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},m),o.createElement("path",{d:"M24 13.3a.2.2 0 01-.2.2H5.74l8.239 8.239a.2.2 0 010 .282L12.14 23.86a.2.2 0 01-.282 0L.14 12.14a.2.2 0 010-.282L11.86.14a.2.2 0 01.282 0L13.98 1.98a.2.2 0 010 .282L5.74 10.5H23.8c.11 0 .2.09.2.2v2.6z",fill:"#212134"}))}}})})},70736:function(R,A,n){(function(s,P){R.exports=P(n(67294))})(this,function(s){return function(P){var i={};function l(o){if(i[o])return i[o].exports;var c=i[o]={i:o,l:!1,exports:{}};return P[o].call(c.exports,c,c.exports,l),c.l=!0,c.exports}return l.m=P,l.c=i,l.d=function(o,c,m){l.o(o,c)||Object.defineProperty(o,c,{enumerable:!0,get:m})},l.r=function(o){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},l.t=function(o,c){if(1&c&&(o=l(o)),8&c||4&c&&typeof o=="object"&&o&&o.__esModule)return o;var m=Object.create(null);if(l.r(m),Object.defineProperty(m,"default",{enumerable:!0,value:o}),2&c&&typeof o!="string")for(var y in o)l.d(m,y,function(h){return o[h]}.bind(null,y));return m},l.n=function(o){var c=o&&o.__esModule?function(){return o.default}:function(){return o};return l.d(c,"a",c),c},l.o=function(o,c){return Object.prototype.hasOwnProperty.call(o,c)},l.p="",l(l.s=35)}({0:function(P,i){P.exports=s},35:function(P,i,l){"use strict";l.r(i);var o=l(0);function c(){return(c=Object.assign||function(m){for(var y=1;y<arguments.length;y++){var h=arguments[y];for(var b in h)Object.prototype.hasOwnProperty.call(h,b)&&(m[b]=h[b])}return m}).apply(this,arguments)}i.default=function(m){return o.createElement("svg",c({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},m),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.68 9.192c-.6.276-2.114 1.18-2.306 1.303a.792.792 0 00-.374.68v1.65a.797.797 0 00.384.687c.254.16 1.73 1.042 2.306 1.303l.744 1.8c-.24.634-.67 2.333-.72 2.554a.797.797 0 00.216.744l1.167 1.166a.801.801 0 00.744.216l.03-.008c.36-.092 1.946-.498 2.523-.712l1.8.744c.276.6 1.181 2.115 1.304 2.307a.805.805 0 00.679.374h1.649a.797.797 0 00.686-.384c.16-.254 1.042-1.73 1.303-2.306l1.8-.744c.634.24 2.333.67 2.554.72a.797.797 0 00.744-.216l1.166-1.167a.803.803 0 00.216-.744l-.008-.03c-.092-.36-.498-1.946-.712-2.523l.744-1.8c.6-.276 2.115-1.181 2.307-1.304a.804.804 0 00.374-.679v-1.649a.796.796 0 00-.382-.679c-.254-.16-1.73-1.041-2.306-1.303l-.744-1.8c.24-.634.67-2.333.72-2.554a.796.796 0 00-.216-.744l-1.166-1.173a.802.802 0 00-.744-.216l-.03.008c-.361.092-1.947.498-2.524.712l-1.8-.744c-.276-.6-1.18-2.115-1.303-2.307a.803.803 0 00-.68-.374h-1.65a.797.797 0 00-.68.382c-.16.254-1.041 1.73-1.303 2.306l-1.8.744c-.634-.24-2.333-.67-2.554-.72a.797.797 0 00-.744.216L2.921 4.094a.802.802 0 00-.216.744l.008.03c.092.361.498 1.947.712 2.524l-.744 1.8zM12 17a5 5 0 100-10 5 5 0 000 10z",fill:"#212134"}))}}})})},19417:(R,A,n)=>{"use strict";n.r(A),n.d(A,{default:()=>Ts});var s=n(67294),P=n(49656),i=n(68547),l=n(83086),o=n(51725),c=n(19408),m=n(78862),y=n(62031),h=n(41798),b=n(26851),O=n(49425),T=n(84686),k=n(80768),Z=n.n(k),L=n(97132),D=n(23724),N=n(63852),$=n(42722),z=(r,e,t)=>new Promise((d,f)=>{var p=a=>{try{u(t.next(a))}catch(g){f(g)}},v=a=>{try{u(t.throw(a))}catch(g){f(g)}},u=a=>a.done?d(a.value):Promise.resolve(a.value).then(p,v);u((t=t.apply(r,e)).next())});const Y=(r,e)=>z(void 0,null,function*(){try{const{data:t}=yield $.be.get((0,$.Gc)("roles"));return e("The roles have loaded successfully"),t}catch(t){throw r({type:"warning",message:{id:"notification.error"}}),new Error("error")}}),qe=(r,e)=>z(void 0,null,function*(){try{yield $.be.delete(`${(0,$.Gc)("roles")}/${r}`)}catch(t){e({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}});var et=n(45697),S=n.n(et),ne=n(30741),J=n(67826),tt=n(19352),rt=n.n(tt),st=n(18568),nt=n.n(st),ot=Object.defineProperty,oe=Object.getOwnPropertySymbols,at=Object.prototype.hasOwnProperty,it=Object.prototype.propertyIsEnumerable,ae=(r,e,t)=>e in r?ot(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ie=(r,e)=>{for(var t in e||(e={}))at.call(e,t)&&ae(r,t,e[t]);if(oe)for(var t of oe(e))it.call(e,t)&&ae(r,t,e[t]);return r};const q=({sortedRoles:r,canDelete:e,permissions:t,setRoleToDelete:d,onDelete:f})=>{const{formatMessage:p}=(0,L.useIntl)(),{push:v}=(0,P.useHistory)(),[u,a]=f,g=E=>e&&!["public","authenticated"].includes(E.type),C=E=>{d(E),a(!u)},w=E=>{v(`/settings/${l.Z}/roles/${E}`)};return s.createElement(h.Tbody,null,r==null?void 0:r.map(E=>s.createElement(h.Tr,ie({key:E.name},(0,i.onRowClick)({fn:()=>w(E.id)})),s.createElement(h.Td,{width:"20%"},s.createElement(O.Typography,null,E.name)),s.createElement(h.Td,{width:"50%"},s.createElement(O.Typography,null,E.description)),s.createElement(h.Td,{width:"30%"},s.createElement(O.Typography,null,`${E.nb_users} ${p({id:"global.users",defaultMessage:"users"}).toLowerCase()}`)),s.createElement(h.Td,null,s.createElement(J.Flex,ie({justifyContent:"end"},i.stopPropagation),s.createElement(i.CheckPermissions,{permissions:t.updateRole},s.createElement(ne.IconButton,{onClick:()=>w(E.id),noBorder:!0,icon:s.createElement(rt(),null),label:p({id:"app.component.table.edit",defaultMessage:"Edit {target}"},{target:`${E.name}`})})),g(E)&&s.createElement(i.CheckPermissions,{permissions:t.deleteRole},s.createElement(ne.IconButton,{onClick:()=>C(E.id),noBorder:!0,icon:s.createElement(nt(),null),label:p({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${E.name}`})})))))))},lt=q;q.defaultProps={canDelete:!1},q.propTypes={onDelete:S().array.isRequired,permissions:S().object.isRequired,setRoleToDelete:S().func.isRequired,sortedRoles:S().array.isRequired,canDelete:S().bool};var le=(r,e,t)=>new Promise((d,f)=>{var p=a=>{try{u(t.next(a))}catch(g){f(g)}},v=a=>{try{u(t.throw(a))}catch(g){f(g)}},u=a=>a.done?d(a.value):Promise.resolve(a.value).then(p,v);u((t=t.apply(r,e)).next())});const ct=()=>{const{trackUsage:r}=(0,i.useTracking)(),{formatMessage:e}=(0,L.useIntl)(),{push:t}=(0,P.useHistory)(),d=(0,i.useNotification)(),{notifyStatus:f}=(0,T.useNotifyAT)(),[{query:p}]=(0,i.useQueryParams)(),v=(p==null?void 0:p._q)||"",[u,a]=(0,s.useState)(!1),[g,C]=(0,s.useState)(!1),[w,E]=(0,s.useState)();(0,i.useFocusWhenNavigate)();const x=(0,D.useQueryClient)(),M=(0,s.useMemo)(()=>({create:o.Z.createRole,read:o.Z.readRoles,update:o.Z.updateRole,delete:o.Z.deleteRole}),[]),{isLoading:B,allowedActions:{canRead:I,canDelete:H}}=(0,i.useRBAC)(M),{isLoading:Ds,data:{roles:se},isFetching:As}=(0,D.useQuery)("get-roles",()=>Y(d,f),{initialData:{},enabled:I}),Je=Ds||As,Ls=()=>{r("willCreateRole"),t(`/settings/${l.Z}/roles/new`)},ws=()=>{a(!u)},Ss={roles:{id:(0,$.OB)("Roles.empty"),defaultMessage:"You don't have any roles yet."},search:{id:(0,$.OB)("Roles.empty.search"),defaultMessage:"No roles match the search."}},Ms=e({id:"global.roles",defaultMessage:"Roles"}),xs=(0,D.useMutation)(Ns=>qe(Ns,d),{onSuccess:()=>le(void 0,null,function*(){yield x.invalidateQueries("get-roles")})}),js=()=>le(void 0,null,function*(){C(!0),yield xs.mutateAsync(w),a(!u),C(!1)}),W=(0,N.ZP)(se||[],v,{keys:["name","description"]}),Us=v&&!W.length?"search":"roles",Bs=4,Is=((se==null?void 0:se.length)||0)+1;return s.createElement(m.Layout,null,s.createElement(i.SettingsPageTitle,{name:Ms}),s.createElement(y.Main,{"aria-busy":Je},s.createElement(m.HeaderLayout,{title:e({id:"global.roles",defaultMessage:"Roles"}),subtitle:e({id:"Settings.roles.list.description",defaultMessage:"List of roles"}),primaryAction:s.createElement(i.CheckPermissions,{permissions:o.Z.createRole},s.createElement(c.Button,{onClick:Ls,startIcon:s.createElement(Z(),null),size:"L"},e({id:(0,$.OB)("List.button.roles"),defaultMessage:"Add new role"})))}),s.createElement(m.ActionLayout,{startActions:s.createElement(i.SearchURLQuery,{label:e({id:"app.component.search.label",defaultMessage:"Search"})})}),s.createElement(m.ContentLayout,null,!I&&s.createElement(i.NoPermissions,null),(Je||B)&&s.createElement(i.LoadingIndicatorPage,null),I&&W&&(W==null?void 0:W.length)?s.createElement(h.Table,{colCount:Bs,rowCount:Is},s.createElement(h.Thead,null,s.createElement(h.Tr,null,s.createElement(h.Th,null,s.createElement(O.Typography,{variant:"sigma",textColor:"neutral600"},e({id:"global.name",defaultMessage:"Name"}))),s.createElement(h.Th,null,s.createElement(O.Typography,{variant:"sigma",textColor:"neutral600"},e({id:"global.description",defaultMessage:"Description"}))),s.createElement(h.Th,null,s.createElement(O.Typography,{variant:"sigma",textColor:"neutral600"},e({id:"global.users",defaultMessage:"Users"}))),s.createElement(h.Th,null,s.createElement(b.VisuallyHidden,null,e({id:"global.actions",defaultMessage:"Actions"}))))),s.createElement(lt,{sortedRoles:W,canDelete:H,permissions:o.Z,setRoleToDelete:E,onDelete:[u,a]})):s.createElement(i.EmptyStateLayout,{content:Ss[Us]})),s.createElement(i.ConfirmDialog,{isConfirmButtonLoading:g,onConfirm:js,onToggleDialog:ws,isOpen:u})))},ut=()=>s.createElement(i.CheckPagePermissions,{permissions:o.Z.accessRoles},s.createElement(ct,null));var j=n(9008),G=n(5493),ce=n(55967),ue=n(59626),dt=n(68717),pt=n.n(dt),mt=n(84734),de=n.n(mt),gt=n(85104),U=n(34626),pe=n(80831),_=n(97961),F=n(96486);const me=(0,s.createContext)({}),ge=({children:r,value:e})=>s.createElement(me.Provider,{value:e},r),ee=()=>(0,s.useContext)(me);ge.propTypes={children:S().node.isRequired,value:S().object.isRequired};var K=n(78384),ft=n(35161),vt=n.n(ft),Pt=n(13217),yt=n.n(Pt);const ht=r=>{switch(r){case"POST":return{text:"success600",border:"success200",background:"success100"};case"GET":return{text:"secondary600",border:"secondary200",background:"secondary100"};case"PUT":return{text:"warning600",border:"warning200",background:"warning100"};case"DELETE":return{text:"danger600",border:"danger200",background:"danger100"};default:return{text:"neutral600",border:"neutral200",background:"neutral100"}}},Et=(0,K.default)(G.Box)`
  margin: -1px;
  border-radius: ${({theme:r})=>r.spaces[1]} 0 0 ${({theme:r})=>r.spaces[1]};
`;function te({route:r}){const{formatMessage:e}=(0,L.useIntl)(),{method:t,handler:d,path:f}=r,p=f?yt()(f.split("/")):[],[v="",u=""]=d?d.split("."):[],a=ht(r.method);return s.createElement(j.Stack,{spacing:2},s.createElement(O.Typography,{variant:"delta",as:"h3"},e({id:"users-permissions.BoundRoute.title",defaultMessage:"Bound route to"}),"\xA0",s.createElement("span",null,v),s.createElement(O.Typography,{variant:"delta",textColor:"primary600"},".",u)),s.createElement(j.Stack,{horizontal:!0,hasRadius:!0,background:"neutral0",borderColor:"neutral200",spacing:0},s.createElement(Et,{background:a.background,borderColor:a.border,padding:2},s.createElement(O.Typography,{fontWeight:"bold",textColor:a.text},t)),s.createElement(G.Box,{paddingLeft:2,paddingRight:2},vt()(p,g=>s.createElement(O.Typography,{key:g,textColor:g.includes(":")?"neutral600":"neutral900"},"/",g)))))}te.defaultProps={route:{handler:"Nocontroller.error",method:"GET",path:"/there-is-no-path"}},te.propTypes={route:S().shape({handler:S().string,method:S().string,path:S().string})};const Ot=te,bt=()=>{const{formatMessage:r}=(0,L.useIntl)(),{selectedAction:e,routes:t}=ee(),d=(0,F.without)(e.split("."),"controllers"),f=(0,F.get)(t,d[0]),p=d.slice(1).join("."),v=(0,F.isEmpty)(f)?[]:f.filter(u=>u.handler.endsWith(p));return s.createElement(U.GridItem,{col:5,background:"neutral150",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,style:{minHeight:"100%"}},e?s.createElement(j.Stack,{spacing:2},v.map((u,a)=>s.createElement(Ot,{key:a,route:u}))):s.createElement(j.Stack,{spacing:2},s.createElement(O.Typography,{variant:"delta",as:"h3"},r({id:"users-permissions.Policies.header.title",defaultMessage:"Advanced settings"})),s.createElement(O.Typography,{as:"p",textColor:"neutral600"},r({id:"users-permissions.Policies.header.hint",defaultMessage:"Select the application's actions or the plugin's actions and click on the cog icon to display the bound route"}))))};var re=n(96654),Rt=n(11700),Ct=n.n(Rt);function Tt(r){switch(r){case"application":return"Application";case"plugin::content-manager":return"Content manager";case"plugin::content-type-builder":return"Content types builder";case"plugin::documentation":return"Documentation";case"plugin::email":return"Email";case"plugin::i18n":return"i18n";case"plugin::upload":return"Upload";case"plugin::users-permissions":return"Users-permissions";default:return Ct()(r.replace("api::","").replace("plugin::",""))}}const Dt=Tt;var At=n(89734),fe=n.n(At),ve=n(81325),Lt=n(70736),wt=n.n(Lt);const Pe=K.css`
  background: ${r=>r.theme.colors.primary100};
  svg {
    opacity: 1;
  }
`,St=(0,K.default)(G.Box)`
  display: flex;
  justify-content: space-between;
  align-items: center;

  svg {
    opacity: 0;
    path {
      fill: ${r=>r.theme.colors.primary600};
    }
  }

  /* Show active style both on hover and when the action is selected */
  ${r=>r.isActive&&Pe}
  &:hover {
    ${Pe}
  }
`,Mt=K.default.div`
  flex: 1;
  align-self: center;
  border-top: 1px solid ${({theme:r})=>r.colors.neutral150};
`,ye=({subCategory:r})=>{const{formatMessage:e}=(0,L.useIntl)(),{onChange:t,onChangeSelectAll:d,onSelectedAction:f,selectedAction:p,modifiedData:v}=ee(),u=(0,s.useMemo)(()=>(0,F.get)(v,r.name,{}),[v,r]),a=(0,s.useMemo)(()=>Object.values(u).every(E=>E.enabled===!0),[u]),g=(0,s.useMemo)(()=>Object.values(u).some(E=>E.enabled===!0)&&!a,[u,a]),C=(0,s.useCallback)(({target:{name:E}})=>{d({target:{name:E,value:!a}})},[a,d]),w=(0,s.useCallback)(E=>p===E,[p]);return s.createElement(G.Box,null,s.createElement(J.Flex,{justifyContent:"space-between",alignItems:"center"},s.createElement(G.Box,{paddingRight:4},s.createElement(O.Typography,{variant:"sigma",textColor:"neutral600"},r.label)),s.createElement(Mt,null),s.createElement(G.Box,{paddingLeft:4},s.createElement(ve.Checkbox,{name:r.name,value:a,onValueChange:E=>C({target:{name:r.name,value:E}}),indeterminate:g},e({id:"app.utils.select-all",defaultMessage:"Select all"})))),s.createElement(J.Flex,{paddingTop:6,paddingBottom:6},s.createElement(U.Grid,{gap:2,style:{flex:1}},r.actions.map(E=>{const x=`${E.name}.enabled`;return s.createElement(U.GridItem,{col:6,key:E.name},s.createElement(St,{isActive:w(E.name),padding:2,hasRadius:!0},s.createElement(ve.Checkbox,{value:(0,F.get)(v,x,!1),name:x,onValueChange:M=>t({target:{name:x,value:M}})},E.label),s.createElement("button",{type:"button","data-testid":"action-cog",onClick:()=>f(E.name),style:{display:"inline-flex",alignItems:"center"}},s.createElement(wt(),null))))}))))};ye.propTypes={subCategory:S().object.isRequired};const xt=ye;var jt=Object.defineProperty,Ut=Object.defineProperties,Bt=Object.getOwnPropertyDescriptors,he=Object.getOwnPropertySymbols,It=Object.prototype.hasOwnProperty,Nt=Object.prototype.propertyIsEnumerable,Ee=(r,e,t)=>e in r?jt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Gt=(r,e)=>{for(var t in e||(e={}))It.call(e,t)&&Ee(r,t,e[t]);if(he)for(var t of he(e))Nt.call(e,t)&&Ee(r,t,e[t]);return r},Ft=(r,e)=>Ut(r,Bt(e));const Oe=({name:r,permissions:e})=>{const t=(0,s.useMemo)(()=>fe()(Object.values(e.controllers).reduce((d,f,p)=>{const v=`${r}.controllers.${Object.keys(e.controllers)[p]}`,u=fe()(Object.keys(f).reduce((a,g)=>[...a,Ft(Gt({},f[g]),{label:g,name:`${v}.${g}`})],[]),"label");return[...d,{actions:u,label:Object.keys(e.controllers)[p],name:v}]},[]),"label"),[r,e]);return s.createElement(G.Box,{padding:6},t.map(d=>s.createElement(xt,{key:d.name,subCategory:d})))};Oe.propTypes={name:S().string.isRequired,permissions:S().object.isRequired};const Zt=Oe;var $t=Object.defineProperty,kt=Object.defineProperties,_t=Object.getOwnPropertyDescriptors,be=Object.getOwnPropertySymbols,Vt=Object.prototype.hasOwnProperty,Ht=Object.prototype.propertyIsEnumerable,Re=(r,e,t)=>e in r?$t(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Wt=(r,e)=>{for(var t in e||(e={}))Vt.call(e,t)&&Re(r,t,e[t]);if(be)for(var t of be(e))Ht.call(e,t)&&Re(r,t,e[t]);return r},zt=(r,e)=>kt(r,_t(e));const Kt=(r,e)=>{const t=Object.keys(e).sort().map(d=>({name:d,isOpen:!1}));return zt(Wt({},r),{collapses:t})};var Q=n(8041),Qt=Object.defineProperty,Xt=Object.defineProperties,Yt=Object.getOwnPropertyDescriptors,Ce=Object.getOwnPropertySymbols,Jt=Object.prototype.hasOwnProperty,qt=Object.prototype.propertyIsEnumerable,Te=(r,e,t)=>e in r?Qt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,De=(r,e)=>{for(var t in e||(e={}))Jt.call(e,t)&&Te(r,t,e[t]);if(Ce)for(var t of Ce(e))qt.call(e,t)&&Te(r,t,e[t]);return r},Ae=(r,e)=>Xt(r,Yt(e));const er={collapses:[]},tr=(r,e)=>(0,Q.default)(r,t=>{switch(e.type){case"TOGGLE_COLLAPSE":{t.collapses=r.collapses.map((d,f)=>f===e.index?Ae(De({},d),{isOpen:!d.isOpen}):Ae(De({},d),{isOpen:!1}));break}default:return t}}),rr=()=>{const{modifiedData:r}=ee(),{formatMessage:e}=(0,L.useIntl)(),[{collapses:t},d]=(0,s.useReducer)(tr,er,p=>Kt(p,r)),f=p=>d({type:"TOGGLE_COLLAPSE",index:p});return s.createElement(j.Stack,{spacing:1},t.map((p,v)=>s.createElement(re.Accordion,{expanded:p.isOpen,onToggle:()=>f(v),key:p.name,variant:v%2===0?"secondary":void 0},s.createElement(re.AccordionToggle,{title:Dt(p.name),description:e({id:"users-permissions.Plugin.permissions.plugins.description",defaultMessage:"Define all allowed actions for the {name} plugin."},{name:p.name}),variant:v%2?"primary":"secondary"}),s.createElement(re.AccordionContent,null,s.createElement(G.Box,null,s.createElement(Zt,{permissions:r[p.name],name:p.name}))))))};var sr=Object.defineProperty,nr=Object.defineProperties,or=Object.getOwnPropertyDescriptors,Le=Object.getOwnPropertySymbols,ar=Object.prototype.hasOwnProperty,ir=Object.prototype.propertyIsEnumerable,we=(r,e,t)=>e in r?sr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,lr=(r,e)=>{for(var t in e||(e={}))ar.call(e,t)&&we(r,t,e[t]);if(Le)for(var t of Le(e))ir.call(e,t)&&we(r,t,e[t]);return r},cr=(r,e)=>nr(r,or(e));const ur={initialData:{},modifiedData:{},routes:{},selectedAction:"",policies:[]},dr=(r,e)=>(0,Q.default)(r,t=>{switch(e.type){case"ON_CHANGE":{const d=e.keys.length,f=e.keys[d-1]==="enabled";if(e.value&&f){const p=(0,F.take)(e.keys,d-1).join(".");t.selectedAction=p}(0,F.set)(t,["modifiedData",...e.keys],e.value);break}case"ON_CHANGE_SELECT_ALL":{const d=["modifiedData",...e.keys],f=(0,F.get)(r,d,{}),p=Object.keys(f).reduce((v,u)=>(v[u]=cr(lr({},f[u]),{enabled:e.value}),v),{});(0,F.set)(t,d,p);break}case"ON_RESET":{t.modifiedData=r.initialData;break}case"ON_SUBMIT_SUCCEEDED":{t.initialData=r.modifiedData;break}case"SELECT_ACTION":{const{actionToSelect:d}=e;t.selectedAction=d===r.selectedAction?"":d;break}default:return t}});var pr=Object.defineProperty,mr=Object.defineProperties,gr=Object.getOwnPropertyDescriptors,Se=Object.getOwnPropertySymbols,fr=Object.prototype.hasOwnProperty,vr=Object.prototype.propertyIsEnumerable,Me=(r,e,t)=>e in r?pr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Pr=(r,e)=>{for(var t in e||(e={}))fr.call(e,t)&&Me(r,t,e[t]);if(Se)for(var t of Se(e))vr.call(e,t)&&Me(r,t,e[t]);return r},yr=(r,e)=>mr(r,gr(e));const hr=(r,e,t)=>yr(Pr({},r),{initialData:e,modifiedData:e,routes:t});var Er=Object.defineProperty,Or=Object.defineProperties,br=Object.getOwnPropertyDescriptors,xe=Object.getOwnPropertySymbols,Rr=Object.prototype.hasOwnProperty,Cr=Object.prototype.propertyIsEnumerable,je=(r,e,t)=>e in r?Er(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Tr=(r,e)=>{for(var t in e||(e={}))Rr.call(e,t)&&je(r,t,e[t]);if(xe)for(var t of xe(e))Cr.call(e,t)&&je(r,t,e[t]);return r},Dr=(r,e)=>Or(r,br(e));const Ue=(0,s.forwardRef)(({permissions:r,routes:e},t)=>{const{formatMessage:d}=(0,L.useIntl)(),[f,p]=(0,s.useReducer)(dr,ur,C=>hr(C,r,e));(0,s.useImperativeHandle)(t,()=>({getPermissions:()=>({permissions:f.modifiedData}),resetForm:()=>{p({type:"ON_RESET"})},setFormAfterSubmit:()=>{p({type:"ON_SUBMIT_SUCCEEDED"})}}));const v=({target:{name:C,value:w}})=>p({type:"ON_CHANGE",keys:C.split("."),value:w==="empty__string_value"?"":w}),u=({target:{name:C,value:w}})=>p({type:"ON_CHANGE_SELECT_ALL",keys:C.split("."),value:w}),a=C=>p({type:"SELECT_ACTION",actionToSelect:C}),g=Dr(Tr({},f),{onChange:v,onChangeSelectAll:u,onSelectedAction:a});return s.createElement(ge,{value:g},s.createElement(U.Grid,{gap:0,shadow:"filterShadow",hasRadius:!0,background:"neutral0"},s.createElement(U.GridItem,{col:7,paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},s.createElement(j.Stack,{spacing:6},s.createElement(j.Stack,{spacing:2},s.createElement(O.Typography,{variant:"delta",as:"h2"},d({id:(0,_.Z)("Plugins.header.title"),defaultMessage:"Permissions"})),s.createElement(O.Typography,{as:"p",textColor:"neutral600"},d({id:(0,_.Z)("Plugins.header.description"),defaultMessage:"Only actions bound by a route are listed below."}))),s.createElement(rr,null))),s.createElement(bt,null)))});Ue.propTypes={permissions:S().object.isRequired,routes:S().object.isRequired};const Be=(0,s.memo)(Ue),zs={isLoading:!0,modifiedData:{}},Ks=(r,e)=>produce(r,t=>{switch(e.type){case"GET_DATA":{t.isLoading=!0,t.modifiedData={};break}case"GET_DATA_SUCCEEDED":{t.isLoading=!1,t.modifiedData=e.data;break}case"GET_DATA_ERROR":{t.isLoading=!0;break}case"ON_SUBMIT_SUCCEEDED":{t.modifiedData=e.data;break}default:return t}}),Qs=null;var Ar=n(25108),Lr=(r,e,t)=>new Promise((d,f)=>{var p=a=>{try{u(t.next(a))}catch(g){f(g)}},v=a=>{try{u(t.throw(a))}catch(g){f(g)}},u=a=>a.done?d(a.value):Promise.resolve(a.value).then(p,v);u((t=t.apply(r,e)).next())});const Xs=(r,e)=>{const{isLoading:t,allowedActions:d}=useRBAC(e),[{isLoading:f,modifiedData:p},v]=useReducer(reducer,initialState),u=useNotification(),a=useRef(!0),g=new AbortController,{signal:C}=g;useEffect(()=>(t||(()=>Lr(void 0,null,function*(){try{v({type:"GET_DATA"});const x=yield request(getRequestURL(r),{method:"GET",signal:C});v({type:"GET_DATA_SUCCEEDED",data:x})}catch(x){a.current&&(v({type:"GET_DATA_ERROR"}),Ar.error(x),u({type:"warning",message:{id:"notification.error"}}))}}))(),()=>{g.abort(),a.current=!1}),[t,r]);const w=useCallback(E=>{v({type:"ON_SUBMIT_SUCCEEDED",data:E})},[]);return{allowedActions:d,dispatchSubmitSucceeded:w,isLoading:f,isLoadingForPermissions:t,modifiedData:p}},Ys=null;var wr=Object.defineProperty,Sr=Object.defineProperties,Mr=Object.getOwnPropertyDescriptors,Ie=Object.getOwnPropertySymbols,xr=Object.prototype.hasOwnProperty,jr=Object.prototype.propertyIsEnumerable,Ne=(r,e,t)=>e in r?wr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ur=(r,e)=>{for(var t in e||(e={}))xr.call(e,t)&&Ne(r,t,e[t]);if(Ie)for(var t of Ie(e))jr.call(e,t)&&Ne(r,t,e[t]);return r},Br=(r,e)=>Sr(r,Mr(e));const Js=(r,e)=>Br(Ur({},r),{isLoading:e}),qs=null,en={roles:[],isLoading:!0},tn=(r,e)=>produce(r,t=>{switch(e.type){case"GET_DATA":{t.isLoading=!0,t.roles=[];break}case"GET_DATA_SUCCEEDED":{t.roles=e.data,t.isLoading=!1;break}case"GET_DATA_ERROR":{t.isLoading=!1;break}default:return t}}),rn=null;var Ir=(r,e,t)=>new Promise((d,f)=>{var p=a=>{try{u(t.next(a))}catch(g){f(g)}},v=a=>{try{u(t.throw(a))}catch(g){f(g)}},u=a=>a.done?d(a.value):Promise.resolve(a.value).then(p,v);u((t=t.apply(r,e)).next())});const sn=(r=!0)=>{const[{roles:e,isLoading:t},d]=useReducer(reducer,initialState,()=>init(initialState,r)),f=useNotification(),p=useRef(!0),v=new AbortController,{signal:u}=v;useEffect(()=>(r&&a(),()=>{v.abort(),p.current=!1}),[r]);const a=()=>Ir(void 0,null,function*(){try{d({type:"GET_DATA"});const{roles:g}=yield request(`/${pluginId}/roles`,{method:"GET",signal:u});d({type:"GET_DATA_SUCCEEDED",data:g})}catch(g){const C=get(g,["response","payload","message"],"An error occured");p.current&&(d({type:"GET_DATA_ERROR"}),C!=="Forbidden"&&f({type:"warning",message:C}))}});return{roles:e,isLoading:t,getData:a}},nn=null;var Nr=Object.defineProperty,Gr=Object.defineProperties,Fr=Object.getOwnPropertyDescriptors,Ge=Object.getOwnPropertySymbols,Zr=Object.prototype.hasOwnProperty,$r=Object.prototype.propertyIsEnumerable,Fe=(r,e,t)=>e in r?Nr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,kr=(r,e)=>{for(var t in e||(e={}))Zr.call(e,t)&&Fe(r,t,e[t]);if(Ge)for(var t of Ge(e))$r.call(e,t)&&Fe(r,t,e[t]);return r},_r=(r,e)=>Gr(r,Fr(e));const Vr=(r,e)=>_r(kr({},r),{isLoading:e});var X=n(65772);const Ze={permissions:{},routes:{},isLoading:!0},Hr=(r,e)=>(0,Q.default)(r,t=>{switch(e.type){case"GET_DATA":{t.isLoading=!0,t.permissions={},t.routes={};break}case"GET_DATA_SUCCEEDED":{t.permissions=e.permissions,t.routes=e.routes,t.isLoading=!1;break}case"GET_DATA_ERROR":{t.isLoading=!1;break}default:return t}});var $e=(r,e,t)=>new Promise((d,f)=>{var p=a=>{try{u(t.next(a))}catch(g){f(g)}},v=a=>{try{u(t.throw(a))}catch(g){f(g)}},u=a=>a.done?d(a.value):Promise.resolve(a.value).then(p,v);u((t=t.apply(r,e)).next())});const ke=(r=!0)=>{const e=(0,i.useNotification)(),[{permissions:t,routes:d,isLoading:f},p]=(0,s.useReducer)(Hr,Ze,()=>Vr(Ze,r)),v=(0,s.useCallback)(()=>$e(void 0,null,function*(){try{p({type:"GET_DATA"});const[{permissions:u},{routes:a}]=yield Promise.all([`/${l.Z}/permissions`,`/${l.Z}/routes`].map(g=>$e(void 0,null,function*(){return(yield X.Z.get(g)).data})));p({type:"GET_DATA_SUCCEEDED",permissions:(0,$.YX)(u),routes:a})}catch(u){const a=(0,F.get)(u,["response","payload","message"],"An error occured");p({type:"GET_DATA_ERROR"}),a!=="Forbidden"&&e({type:"warning",message:a})}}),[e]);return(0,s.useEffect)(()=>{r&&v()},[v,r]),{permissions:t,routes:d,getData:v,isLoading:f}},Wr={role:{},isLoading:!0},zr=(r,e)=>(0,Q.default)(r,t=>{switch(e.type){case"GET_DATA_SUCCEEDED":{t.role=e.role,t.isLoading=!1;break}case"GET_DATA_ERROR":{t.isLoading=!1;break}case"ON_SUBMIT_SUCCEEDED":{t.role.name=e.name,t.role.description=e.description;break}default:return t}});var Kr=n(25108),Qr=Object.defineProperty,Xr=Object.defineProperties,Yr=Object.getOwnPropertyDescriptors,_e=Object.getOwnPropertySymbols,Jr=Object.prototype.hasOwnProperty,qr=Object.prototype.propertyIsEnumerable,Ve=(r,e,t)=>e in r?Qr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,He=(r,e)=>{for(var t in e||(e={}))Jr.call(e,t)&&Ve(r,t,e[t]);if(_e)for(var t of _e(e))qr.call(e,t)&&Ve(r,t,e[t]);return r},es=(r,e)=>Xr(r,Yr(e)),ts=(r,e,t)=>new Promise((d,f)=>{var p=a=>{try{u(t.next(a))}catch(g){f(g)}},v=a=>{try{u(t.throw(a))}catch(g){f(g)}},u=a=>a.done?d(a.value):Promise.resolve(a.value).then(p,v);u((t=t.apply(r,e)).next())});const rs=r=>{const[e,t]=(0,s.useReducer)(zr,Wr),d=(0,i.useNotification)(),f=(0,s.useRef)(null);(0,s.useEffect)(()=>(f.current=!0,r?p(r):t({type:"GET_DATA_SUCCEEDED",role:{}}),()=>f.current=!1),[r]);const p=u=>ts(void 0,null,function*(){try{const{data:{role:a}}=yield X.Z.get(`/${l.Z}/roles/${u}`);f.current&&t({type:"GET_DATA_SUCCEEDED",role:a})}catch(a){Kr.error(a),t({type:"GET_DATA_ERROR"}),d({type:"warning",message:{id:"notification.error"}})}}),v=(0,s.useCallback)(u=>{t(He({type:"ON_SUBMIT_SUCCEEDED"},u))},[]);return es(He({},e),{onSubmitSucceeded:v})};var V=n(53209);const ss=V.object().shape({name:V.string().required(i.translatedErrors.required),description:V.string().required(i.translatedErrors.required)});var ns=n(25108),os=Object.defineProperty,as=Object.defineProperties,is=Object.getOwnPropertyDescriptors,We=Object.getOwnPropertySymbols,ls=Object.prototype.hasOwnProperty,cs=Object.prototype.propertyIsEnumerable,ze=(r,e,t)=>e in r?os(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ke=(r,e)=>{for(var t in e||(e={}))ls.call(e,t)&&ze(r,t,e[t]);if(We)for(var t of We(e))cs.call(e,t)&&ze(r,t,e[t]);return r},us=(r,e)=>as(r,is(e)),ds=(r,e,t)=>new Promise((d,f)=>{var p=a=>{try{u(t.next(a))}catch(g){f(g)}},v=a=>{try{u(t.throw(a))}catch(g){f(g)}},u=a=>a.done?d(a.value):Promise.resolve(a.value).then(p,v);u((t=t.apply(r,e)).next())});const ps=()=>{const{formatMessage:r}=(0,L.useIntl)(),[e,t]=(0,s.useState)(!1),d=(0,i.useNotification)(),{lockApp:f,unlockApp:p}=(0,i.useOverlayBlocker)(),{params:{id:v}}=(0,P.useRouteMatch)(`/settings/${l.Z}/roles/:id`),{isLoading:u,routes:a}=ke(),{role:g,onSubmitSucceeded:C,isLoading:w}=rs(v),E=(0,s.useRef)(),x=M=>ds(void 0,null,function*(){f(),t(!0);try{const B=E.current.getPermissions();yield X.Z.put(`/${l.Z}/roles/${v}`,us(Ke(Ke({},M),B),{users:[]})),C({name:M.name,description:M.description}),d({type:"success",message:{id:(0,_.Z)("Settings.roles.edited"),defaultMessage:"Role edited"}})}catch(B){ns.error(B),d({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}})}t(!1),p()});return w?s.createElement(i.LoadingIndicatorPage,null):s.createElement(y.Main,null,s.createElement(i.SettingsPageTitle,{name:"Roles"}),s.createElement(pe.Formik,{enableReinitialize:!0,initialValues:{name:g.name,description:g.description},onSubmit:x,validationSchema:ss},({handleSubmit:M,values:B,handleChange:I,errors:H})=>s.createElement(i.Form,{noValidate:!0,onSubmit:M},s.createElement(m.HeaderLayout,{primaryAction:!u&&s.createElement(c.Button,{disabled:g.code==="strapi-super-admin",type:"submit",loading:e,startIcon:s.createElement(de(),null)},r({id:"global.save",defaultMessage:"Save"})),title:g.name,subtitle:g.description,navigationAction:s.createElement(gt.Link,{startIcon:s.createElement(pt(),null),to:"/settings/users-permissions/roles"},r({id:"global.back",defaultMessage:"Back"}))}),s.createElement(m.ContentLayout,null,s.createElement(j.Stack,{spacing:7},s.createElement(G.Box,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},s.createElement(j.Stack,{spacing:4},s.createElement(O.Typography,{variant:"delta",as:"h2"},r({id:(0,_.Z)("EditPage.form.roles"),defaultMessage:"Role details"})),s.createElement(U.Grid,{gap:4},s.createElement(U.GridItem,{col:6},s.createElement(ce.TextInput,{name:"name",value:B.name||"",onChange:I,label:r({id:"global.name",defaultMessage:"Name"}),error:H.name?r({id:H.name,defaultMessage:"Invalid value"}):null})),s.createElement(U.GridItem,{col:6},s.createElement(ue.Textarea,{name:"description",value:B.description||"",onChange:I,label:r({id:"global.description",defaultMessage:"Description"}),error:H.description?r({id:H.description,defaultMessage:"Invalid value"}):null}))))),!u&&s.createElement(Be,{ref:E,permissions:g.permissions,routes:a}))))))},ms=()=>s.createElement(i.CheckPagePermissions,{permissions:o.Z.updateRole},s.createElement(ps,null)),gs=V.object().shape({name:V.string().required(i.translatedErrors.required),description:V.string().required(i.translatedErrors.required)});var fs=n(25108),vs=Object.defineProperty,Ps=Object.defineProperties,ys=Object.getOwnPropertyDescriptors,Qe=Object.getOwnPropertySymbols,hs=Object.prototype.hasOwnProperty,Es=Object.prototype.propertyIsEnumerable,Xe=(r,e,t)=>e in r?vs(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ye=(r,e)=>{for(var t in e||(e={}))hs.call(e,t)&&Xe(r,t,e[t]);if(Qe)for(var t of Qe(e))Es.call(e,t)&&Xe(r,t,e[t]);return r},Os=(r,e)=>Ps(r,ys(e)),bs=(r,e,t)=>new Promise((d,f)=>{var p=a=>{try{u(t.next(a))}catch(g){f(g)}},v=a=>{try{u(t.throw(a))}catch(g){f(g)}},u=a=>a.done?d(a.value):Promise.resolve(a.value).then(p,v);u((t=t.apply(r,e)).next())});const Rs=()=>{const{formatMessage:r}=(0,L.useIntl)(),[e,t]=(0,s.useState)(!1),d=(0,i.useNotification)(),{goBack:f}=(0,P.useHistory)(),{lockApp:p,unlockApp:v}=(0,i.useOverlayBlocker)(),{isLoading:u,permissions:a,routes:g}=ke(),{trackUsage:C}=(0,i.useTracking)(),w=(0,s.useRef)(),E=x=>bs(void 0,null,function*(){p(),t(!0);try{const M=w.current.getPermissions();yield X.Z.post(`/${l.Z}/roles`,Os(Ye(Ye({},x),M),{users:[]})),C("didCreateRole"),d({type:"success",message:{id:(0,_.Z)("Settings.roles.created"),defaultMessage:"Role created"}}),f()}catch(M){fs.error(M),d({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}})}t(!1),v()});return s.createElement(y.Main,null,s.createElement(i.SettingsPageTitle,{name:"Roles"}),s.createElement(pe.Formik,{enableReinitialize:!0,initialValues:{name:"",description:""},onSubmit:E,validationSchema:gs},({handleSubmit:x,values:M,handleChange:B,errors:I})=>s.createElement(i.Form,{noValidate:!0,onSubmit:x},s.createElement(m.HeaderLayout,{primaryAction:!u&&s.createElement(c.Button,{type:"submit",loading:e,startIcon:s.createElement(de(),null)},r({id:"global.save",defaultMessage:"Save"})),title:r({id:"Settings.roles.create.title",defaultMessage:"Create a role"}),subtitle:r({id:"Settings.roles.create.description",defaultMessage:"Define the rights given to the role"})}),s.createElement(m.ContentLayout,null,s.createElement(j.Stack,{spacing:7},s.createElement(G.Box,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},s.createElement(j.Stack,{spacing:4},s.createElement(O.Typography,{variant:"delta",as:"h2"},r({id:(0,_.Z)("EditPage.form.roles"),defaultMessage:"Role details"})),s.createElement(U.Grid,{gap:4},s.createElement(U.GridItem,{col:6},s.createElement(ce.TextInput,{name:"name",value:M.name||"",onChange:B,label:r({id:"global.name",defaultMessage:"Name"}),error:I.name?r({id:I.name,defaultMessage:"Invalid value"}):null})),s.createElement(U.GridItem,{col:6},s.createElement(ue.Textarea,{name:"description",value:M.description||"",onChange:B,label:r({id:"global.description",defaultMessage:"Description"}),error:I.description?r({id:I.description,defaultMessage:"Invalid value"}):null}))))),!u&&s.createElement(Be,{ref:w,permissions:a,routes:g}))))))},Cs=()=>s.createElement(i.CheckPagePermissions,{permissions:o.Z.createRole},s.createElement(Rs,null)),Ts=()=>s.createElement(i.CheckPagePermissions,{permissions:o.Z.accessRoles},s.createElement(P.Switch,null,s.createElement(P.Route,{path:`/settings/${l.Z}/roles/new`,component:Cs,exact:!0}),s.createElement(P.Route,{path:`/settings/${l.Z}/roles/:id`,component:ms,exact:!0}),s.createElement(P.Route,{path:`/settings/${l.Z}/roles`,component:ut,exact:!0}),s.createElement(P.Route,{path:"",component:i.NotFound})))},65772:(R,A,n)=>{"use strict";n.d(A,{Z:()=>m});var s=n(9669),P=n.n(s),i=n(68547),l=n.n(i),o=(y,h,b)=>new Promise((O,T)=>{var k=D=>{try{L(b.next(D))}catch(N){T(N)}},Z=D=>{try{L(b.throw(D))}catch(N){T(N)}},L=D=>D.done?O(D.value):Promise.resolve(D.value).then(k,Z);L((b=b.apply(y,h)).next())});const c=P().create({baseURL:""});c.interceptors.request.use(y=>o(void 0,null,function*(){return y.headers={Authorization:`Bearer ${i.auth.getToken()}`,Accept:"application/json","Content-Type":"application/json"},y}),y=>{Promise.reject(y)}),c.interceptors.response.use(y=>y,y=>{var h;throw((h=y.response)==null?void 0:h.status)===401&&(i.auth.clearAppStorage(),window.location.reload()),y});const m=c},42722:(R,A,n)=>{"use strict";n.d(A,{be:()=>s.Z,YX:()=>l,Gc:()=>m,OB:()=>y.Z});var s=n(65772),P=n(96486);const l=h=>Object.keys(h).reduce((b,O)=>{const T=h[O].controllers,k=Object.keys(T).reduce((Z,L)=>((0,P.isEmpty)(T[L])||(Z[L]=T[L]),Z),{});return(0,P.isEmpty)(k)||(b[O]={controllers:k}),b},{});var o=n(83086);const m=h=>`/${o.Z}/${h}`;var y=n(97961)},89881:(R,A,n)=>{var s=n(47816),P=n(99291),i=P(s);R.exports=i},69199:(R,A,n)=>{var s=n(89881),P=n(98612);function i(l,o){var c=-1,m=P(l)?Array(l.length):[];return s(l,function(y,h,b){m[++c]=o(y,h,b)}),m}R.exports=i},82689:(R,A,n)=>{var s=n(29932),P=n(97786),i=n(67206),l=n(69199),o=n(71131),c=n(7518),m=n(85022),y=n(6557),h=n(1469);function b(O,T,k){T.length?T=s(T,function(D){return h(D)?function(N){return P(N,D.length===1?D[0]:D)}:D}):T=[y];var Z=-1;T=s(T,c(i));var L=l(O,function(D,N,$){var z=s(T,function(Y){return Y(D)});return{criteria:z,index:++Z,value:D}});return o(L,function(D,N){return m(D,N,k)})}R.exports=b},71131:R=>{function A(n,s){var P=n.length;for(n.sort(s);P--;)n[P]=n[P].value;return n}R.exports=A},26393:(R,A,n)=>{var s=n(33448);function P(i,l){if(i!==l){var o=i!==void 0,c=i===null,m=i===i,y=s(i),h=l!==void 0,b=l===null,O=l===l,T=s(l);if(!b&&!T&&!y&&i>l||y&&h&&O&&!b&&!T||c&&h&&O||!o&&O||!m)return 1;if(!c&&!y&&!T&&i<l||T&&o&&m&&!c&&!y||b&&o&&m||!h&&m||!O)return-1}return 0}R.exports=P},85022:(R,A,n)=>{var s=n(26393);function P(i,l,o){for(var c=-1,m=i.criteria,y=l.criteria,h=m.length,b=o.length;++c<h;){var O=s(m[c],y[c]);if(O){if(c>=b)return O;var T=o[c];return O*(T=="desc"?-1:1)}}return i.index-l.index}R.exports=P},99291:(R,A,n)=>{var s=n(98612);function P(i,l){return function(o,c){if(o==null)return o;if(!s(o))return i(o,c);for(var m=o.length,y=l?m:-1,h=Object(o);(l?y--:++y<m)&&c(h[y],y,h)!==!1;);return o}}R.exports=P},35161:(R,A,n)=>{var s=n(29932),P=n(67206),i=n(69199),l=n(1469);function o(c,m){var y=l(c)?s:i;return y(c,P(m,3))}R.exports=o},89734:(R,A,n)=>{var s=n(21078),P=n(82689),i=n(5976),l=n(16612),o=i(function(c,m){if(c==null)return[];var y=m.length;return y>1&&l(c,m[0],m[1])?m=[]:y>2&&l(m[0],m[1],m[2])&&(m=[m[0]]),P(c,s(m,1),[])});R.exports=o},13217:(R,A,n)=>{var s=n(14259);function P(i){var l=i==null?0:i.length;return l?s(i,1,l):[]}R.exports=P}}]);
